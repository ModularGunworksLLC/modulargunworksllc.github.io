<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Modular Gunworks LLC - Secure checkout. Multiple payment options, FFL transfer services available.">
  <title>Checkout | Modular Gunworks LLC</title>
  <link rel="stylesheet" href="../styles/design-system.css">
  <link rel="stylesheet" href="../styles/components.css">
  <link rel="stylesheet" href="../styles/layout.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="icon" type="image/png" href="../favicon.png">
  <style>
    .checkout-container { max-width: 1000px; margin: 2rem auto; padding: 0 2rem; }
    .progress-bar { display: flex; justify-content: space-between; margin-bottom: 3rem; position: relative; }
    .progress-bar::before { content: ''; position: absolute; top: 20px; left: 0; right: 0; height: 3px; background: #ddd; z-index: -1; }
    .progress-step { flex: 1; text-align: center; }
    .progress-step.active { color: var(--color-primary); font-weight: bold; }
    .progress-step.completed { color: #2d5016; }
    .progress-step.completed::before { background: #2d5016; }
    .progress-step.active::before { background: var(--color-primary); }
    .progress-step::before { content: ''; display: inline-block; width: 40px; height: 40px; border-radius: 50%; background: #ddd; line-height: 40px; margin-bottom: 0.5rem; }
    .progress-step.active::before { background: var(--color-primary); color: white; }
    .progress-step.completed::before { background: #2d5016; content: '\f05d'; font-family: 'Font Awesome 6 Free'; font-weight: 900; color: white; display: flex; align-items: center; justify-content: center; }
    .step-content { display: none; }
    .step-content.active { display: block; }
    .step-content.completed { display: none; }
    .form-section { background: #f9f9f9; padding: 2rem; border-radius: 8px; margin-bottom: 2rem; }
    .form-section h3 { color: var(--color-primary); margin-top: 0; }
    .form-group { margin-bottom: 1.5rem; }
    .form-group label { display: block; font-weight: bold; margin-bottom: 0.5rem; color: #333; }
    .form-group input, .form-group select, .form-group textarea { width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 4px; font-size: 1rem; box-sizing: border-box; font-family: inherit; }
    .form-group input:focus, .form-group select:focus, .form-group textarea:focus { outline: none; border-color: var(--color-primary); box-shadow: 0 0 5px rgba(192,0,0,0.2); }
    .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
    .form-row.full { grid-template-columns: 1fr; }
    .button { background: var(--color-primary); color: white; padding: 1rem 2rem; border: none; border-radius: 4px; font-size: 1.1rem; font-weight: bold; cursor: pointer; transition: background 0.3s; }
    .button:hover { background: #990000; }
    .button.secondary { background: #666; }
    .button.secondary:hover { background: #333; }
    .button-group { display: flex; gap: 1rem; margin-top: 2rem; }
    .button-group button { flex: 1; }
    .summary-box { background: #f5f5f5; padding: 1.5rem; border-radius: 8px; border-left: 4px solid var(--color-accent); }
    .order-summary { background: #f9f9f9; padding: 2rem; border-radius: 8px; position: sticky; top: 200px; }
    .order-summary h3 { color: var(--color-primary); margin-top: 0; }
    .order-item { display: flex; justify-content: space-between; padding: 0.75rem 0; border-bottom: 1px solid #eee; }
    .order-item.total { border: none; font-size: 1.2rem; font-weight: bold; padding-top: 1rem; color: var(--color-primary); }
    .order-item.shipping, .order-item.tax { font-size: 0.95rem; color: #666; }
    .checkbox-group { margin-bottom: 1.5rem; }
    .checkbox-group label { display: flex; align-items: center; margin-bottom: 0.75rem; font-weight: normal; }
    .checkbox-group input[type="checkbox"] { margin-right: 0.75rem; width: auto; }
    .success-message { background: #e8f5e9; border-left: 4px solid #2d5016; padding: 1.5rem; border-radius: 4px; margin-bottom: 2rem; }
    .success-message h2 { color: #2d5016; margin-top: 0; }
  </style>
</head>
<body>
  <header id="site-header">
    <nav class="header-nav flex flex-center" style="justify-content:space-between; align-items:center; padding:1.5rem 2rem; background:linear-gradient(90deg,rgba(24,26,27,0.45) 0%,rgba(24,26,27,0.18) 100%), url('../images/header-flag.png') center 40%/cover no-repeat; filter:brightness(1.25) contrast(1.15) saturate(1.2); position:sticky; top:0; z-index:100; box-shadow:0 2px 8px rgba(0,0,0,0.08); min-height:160px;">
      <div class="flex flex-center" style="gap:1rem; align-items:center; position:relative; z-index:1;">
        <img src="../images/modular-gunworks-llc.png" alt="Modular Gunworks LLC Logo" style="height:56px; width:auto; background:transparent; border-radius:6px; padding:2px; box-shadow:0 1px 4px rgba(0,0,0,0.08);">
        <a href="../index.html" class="header-logo" style="font-size:2rem; color:#fff; text-shadow:0 2px 8px #000, 0 1px 0 #222, 0 0 4px #fff; text-decoration:none; font-weight:900; letter-spacing:2px;">Modular Gunworks LLC</a>
      </div>
      <form class="search-bar" style="flex:1; max-width:500px; margin:0 2rem; display:flex; position:relative; z-index:1;">
        <input type="text" placeholder="Search ammo, gear, or answers..." style="flex:1; padding:0.6rem; border-radius:4px 0 0 4px; font-size:1rem;">
        <button type="submit" class="button" style="border-radius:0 4px 4px 0;">Search</button>
      </form>
      <div class="flex flex-center" style="gap:2rem; align-items:center; position:relative; z-index:1;">
        <a href="#" style="color:var(--color-text-light); text-decoration:none; font-weight:600; font-size:1.1rem;">Account</a>
        <a href="#" style="color:var(--color-text-light); text-decoration:none; font-weight:600; font-size:1.1rem;">Help</a>
        <a href="cart.html" style="color:var(--color-text-light); text-decoration:none; font-weight:600; font-size:1.1rem;">Cart</a>
        <button id="theme-toggle" class="theme-toggle-icon" aria-label="Toggle Theme">
          <span id="theme-icon"></span>
        </button>
      </div>
    </nav>
    <nav class="main-categories" style="background:var(--color-accent); padding:0.5rem 2rem; box-shadow:0 2px 8px rgba(0,0,0,0.04);">
      <div class="flex" style="gap:2.5rem; justify-content:center;">
        <a href="ammunition.html" class="main-cat-link">Ammunition</a>
        <a href="magazines.html" class="main-cat-link">Magazines</a>
        <a href="gun-parts.html" class="main-cat-link">Gun Parts</a>
        <a href="gear.html" class="main-cat-link">Gear</a>
        <a href="optics.html" class="main-cat-link">Optics & Sights</a>
        <a href="reloading.html" class="main-cat-link">Reloading</a>
        <a href="survival.html" class="main-cat-link">Prep & Survival</a>
        <a href="brands.html" class="main-cat-link">Brands</a>
        <a href="sale.html" class="main-cat-link">ON SALE</a>
        <a href="../services.html" class="main-cat-link" style="color:#ffcc00; font-weight:bold;">SERVICES</a>
      </div>
    </nav>
    <div class="promo-banner" style="background:linear-gradient(90deg, var(--color-primary) 0%, var(--color-accent) 100%); color:#fff; text-align:center; font-size:1.15rem; font-weight:600; padding:0.75rem 0; letter-spacing:1px;">
      <span>Expert Gunsmith • FFL Transfers • Custom Builds • Huntsville's Trusted Local Gunsmith</span>
    </div>
  </header>

  <main class="checkout-container">
    <h1 style="text-align: center; color: var(--color-primary); margin-bottom: 3rem;">Secure Checkout</h1>

    <!-- PROGRESS BAR -->
    <div class="progress-bar">
      <div class="progress-step active" data-step="1">
        <div class="num">1</div>
        <div style="font-size: 0.9rem;">Shipping</div>
      </div>
      <div class="progress-step" data-step="2">
        <div class="num">2</div>
        <div style="font-size: 0.9rem;">Services</div>
      </div>
      <div class="progress-step" data-step="3">
        <div class="num">3</div>
        <div style="font-size: 0.9rem;">Payment</div>
      </div>
      <div class="progress-step" data-step="4">
        <div class="num">4</div>
        <div style="font-size: 0.9rem;">Review</div>
      </div>
    </div>

    <div style="display: grid; grid-template-columns: 1fr 350px; gap: 2rem;">
      
      <!-- MAIN FORM -->
      <form id="checkout-form">

        <!-- STEP 1: SHIPPING -->
        <div class="step-content active" data-step="1">
          <div class="form-section">
            <h3>Shipping Address</h3>
            <div class="form-row">
              <div class="form-group">
                <label>First Name *</label>
                <input type="text" name="firstName" required>
              </div>
              <div class="form-group">
                <label>Last Name *</label>
                <input type="text" name="lastName" required>
              </div>
            </div>
            <div class="form-group">
              <label>Street Address *</label>
              <input type="text" name="address" required>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>City *</label>
                <input type="text" name="city" required>
              </div>
              <div class="form-group">
                <label>State *</label>
                <input type="text" name="state" maxlength="2" required>
              </div>
              <div class="form-group">
                <label>ZIP Code *</label>
                <input type="text" name="zip" required>
              </div>
            </div>
            <div class="form-group">
              <label>Email *</label>
              <input type="email" name="email" required>
            </div>
            <div class="form-group">
              <label>Phone Number *</label>
              <input type="tel" name="phone" required>
            </div>
          </div>

          <div class="form-section">
            <h3>Shipping Method</h3>
            <div class="form-group">
              <label style="font-weight: normal; display: flex; align-items: center;">
                <input type="radio" name="shipping" value="standard" checked required style="width: auto; margin-right: 0.5rem;">
                <span><strong>Standard Shipping (5-7 business days)</strong> - FREE</span>
              </label>
            </div>
            <div class="form-group">
              <label style="font-weight: normal; display: flex; align-items: center;">
                <input type="radio" name="shipping" value="expedited" required style="width: auto; margin-right: 0.5rem;">
                <span><strong>Expedited Shipping (2-3 business days)</strong> - $15.99</span>
              </label>
            </div>
            <p style="font-size: 0.9rem; color: #666; margin-top: 1rem;">
              <strong>Note:</strong> Some items (firearms) may have restricted shipping options. You'll be notified of any limitations.
            </p>
          </div>

          <div class="button-group">
            <button type="button" class="button" onclick="nextStep(2)">Continue to Services</button>
          </div>
        </div>

        <!-- STEP 2: SERVICES -->
        <div class="step-content" data-step="2">
          <div class="form-section">
            <h3>Optional Services</h3>
            <p style="color: #666; margin-bottom: 1.5rem;">Add any gunsmithing or FFL services to your order:</p>

            <div class="checkbox-group">
              <label>
                <input type="checkbox" name="service" value="ffl-handgun" data-price="30">
                <span><strong>FFL Transfer - Handgun</strong> - $30 <br><span style="font-size: 0.9rem; color: #666;">Licensed FFL transfer with NICS background check</span></span>
              </label>
            </div>

            <div class="checkbox-group">
              <label>
                <input type="checkbox" name="service" value="ffl-rifle" data-price="20">
                <span><strong>FFL Transfer - Rifle/Shotgun</strong> - $20 <br><span style="font-size: 0.9rem; color: #666;">Licensed FFL transfer with NICS background check</span></span>
              </label>
            </div>

            <div class="checkbox-group">
              <label>
                <input type="checkbox" name="service" value="cleaning" data-price="40">
                <span><strong>Cleaning & Maintenance</strong> - $40 <br><span style="font-size: 0.9rem; color: #666;">Complete firearm cleaning and inspection</span></span>
              </label>
            </div>

            <div class="checkbox-group">
              <label>
                <input type="checkbox" name="service" value="diagnostics" data-price="60">
                <span><strong>Function Testing & Diagnostics</strong> - $60 <br><span style="font-size: 0.9rem; color: #666;">Test fire and diagnose any issues</span></span>
              </label>
            </div>

            <div class="checkbox-group">
              <label>
                <input type="checkbox" name="service" value="optics-mount" data-price="50">
                <span><strong>Optics Mounting & Zeroing</strong> - $50 <br><span style="font-size: 0.9rem; color: #666;">Professional installation and sight-in</span></span>
              </label>
            </div>

            <div class="checkbox-group">
              <label>
                <input type="checkbox" name="service" value="headspace" data-price="40">
                <span><strong>Headspace Check</strong> - $40 <br><span style="font-size: 0.9rem; color: #666;">Professional headspace verification</span></span>
              </label>
            </div>

            <div class="checkbox-group">
              <label>
                <input type="checkbox" name="service" value="springs" data-price="50">
                <span><strong>Spring Replacement</strong> - $50 <br><span style="font-size: 0.9rem; color: #666;">Replace worn springs and internal components</span></span>
              </label>
            </div>

            <div style="background: #fffacd; padding: 1rem; border-radius: 4px; margin-top: 2rem;">
              <p style="margin: 0; font-size: 0.9rem; color: #666;">
                <strong>Need a custom build or repair?</strong> <a href="../services.html" style="color: var(--color-primary); font-weight: bold;">Contact our gunsmith team</a> for a custom quote.
              </p>
            </div>
          </div>

          <div class="button-group">
            <button type="button" class="button secondary" onclick="prevStep(1)">Back</button>
            <button type="button" class="button" onclick="nextStep(3)">Continue to Payment</button>
          </div>
        </div>

        <!-- STEP 3: PAYMENT -->
        <div class="step-content" data-step="3">
          <div class="form-section">
            <h3>Payment Method</h3>
            <div class="form-group">
              <label style="font-weight: normal; display: flex; align-items: center;">
                <input type="radio" name="payment" value="credit" checked required style="width: auto; margin-right: 0.5rem;">
                <span><strong>Credit / Debit Card</strong></span>
              </label>
            </div>
            <div class="form-group">
              <label style="font-weight: normal; display: flex; align-items: center;">
                <input type="radio" name="payment" value="paypal" required style="width: auto; margin-right: 0.5rem;">
                <span><strong>PayPal</strong></span>
              </label>
            </div>
          </div>

          <div class="form-section">
            <h3>Card Information</h3>
            <div class="form-group">
              <label>Cardholder Name *</label>
              <input type="text" name="cardName" required>
            </div>
            <div class="form-group">
              <label>Card Number *</label>
              <input type="text" placeholder="1234 5678 9012 3456" name="cardNumber" required pattern="\d{13,19}">
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Expiration Date *</label>
                <input type="text" placeholder="MM/YY" name="expiry" required pattern="\d{2}/\d{2}">
              </div>
              <div class="form-group">
                <label>CVV *</label>
                <input type="text" placeholder="123" name="cvv" required pattern="\d{3,4}">
              </div>
            </div>
            <p style="font-size: 0.85rem; color: #666; margin-top: 1rem;">
              Your payment information is encrypted and secure. We never store full card details.
            </p>
          </div>

          <div class="button-group">
            <button type="button" class="button secondary" onclick="prevStep(2)">Back</button>
            <button type="button" class="button" onclick="nextStep(4)">Review Order</button>
          </div>
        </div>

        <!-- STEP 4: REVIEW -->
        <div class="step-content" data-step="4">
          <div class="form-section">
            <h3>Order Review</h3>
            <div id="order-review" style="margin-bottom: 2rem;"></div>

            <div class="checkbox-group">
              <label>
                <input type="checkbox" name="terms" required>
                <span>I agree to the <a href="../terms.html" style="color: var(--color-primary);">Terms & Conditions</a></span>
              </label>
            </div>

            <div class="checkbox-group">
              <label>
                <input type="checkbox" name="privacy">
                <span>I agree to the <a href="../privacy.html" style="color: var(--color-primary);">Privacy Policy</a></span>
              </label>
            </div>

            <div style="background: #fef3c7; padding: 1rem; border-radius: 4px; margin-top: 1.5rem; border-left: 4px solid var(--color-accent);">
              <p style="margin: 0; font-size: 0.9rem;">
                <strong>Firearm Compliance:</strong> All firearm sales comply with federal, state, and local laws. FFL transfers required for applicable items.
              </p>
            </div>
          </div>

          <div class="button-group">
            <button type="button" class="button secondary" onclick="prevStep(3)">Back</button>
            <button type="submit" class="button">Complete Purchase</button>
          </div>
        </div>

      </form>

      <!-- SIDEBAR ORDER SUMMARY -->
      <aside>
        <div class="order-summary">
          <h3>Order Summary</h3>
          <div id="items-summary">
            <div class="order-item"><span>Subtotal</span><span>$0.00</span></div>
            <div class="order-item shipping"><span>Shipping</span><span id="shipping-cost">FREE</span></div>
            <div class="order-item tax"><span>Tax (est.)</span><span id="tax-cost">$0.00</span></div>
          </div>
          <div class="order-item total">
            <span>Total</span>
            <span id="total-cost">$0.00</span>
          </div>

          <div style="background: #e8f5e9; padding: 1rem; border-radius: 4px; margin-top: 1.5rem; font-size: 0.9rem; color: #2d5016;">
            <strong><i class="fas fa-check" style="margin-right: 0.5rem;"></i>Free Shipping on Orders Over $100</strong>
            <p style="margin: 0.5rem 0 0 0;">Your order qualifies for free shipping!</p>
          </div>

          <p style="font-size: 0.8rem; color: #999; text-align: center; margin-top: 1.5rem;">
            Have a discount code? <a href="#" onclick="togglePromo(); return false;" style="color: var(--color-primary); text-decoration: underline;">Click here</a>
          </p>

          <div id="promo-form" style="display: none; margin-top: 1rem;">
            <input type="text" placeholder="Enter promo code" style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 0.5rem;">
            <button type="button" style="width: 100%; padding: 0.5rem; background: var(--color-accent); color: #000; border: none; border-radius: 4px; font-weight: bold; cursor: pointer;">Apply</button>
          </div>
        </div>

        <div style="background: #f5f5f5; padding: 1.5rem; border-radius: 8px; margin-top: 2rem; text-align: center;">
          <p style="margin-top: 0; font-weight: bold; color: #333;">Questions?</p>
          <p style="font-size: 0.95rem; color: #666; margin-bottom: 1rem;">Contact our support team:</p>
          <a href="tel:2568675309" style="display: block; color: var(--color-primary); font-weight: bold; font-size: 1.1rem; text-decoration: none; margin-bottom: 0.5rem;">(256) 867-5309</a>
          <a href="mailto:modulargunworks@gmail.com" style="display: block; color: var(--color-primary); font-weight: bold; text-decoration: underline;">Email Support</a>
        </div>
      </aside>

    </div>

  </main>

  <footer class="site-footer">
    <div class="footer-columns" style="display:flex; justify-content:center; gap:4rem; background:#181a1b; color:#fff; padding:2.5rem 1rem 1.5rem 1rem;">
      <div style="min-width:160px;">
        <h4 style="color:#fff; text-align:center;">Shop</h4>
        <ul style="list-style:none; padding:0; text-align:center;">
          <li><a href="ammunition.html" style="color:#fff; text-decoration:none;">Ammunition</a></li>
          <li><a href="magazines.html" style="color:#fff; text-decoration:none;">Magazines</a></li>
          <li><a href="gun-parts.html" style="color:#fff; text-decoration:none;">Gun Parts</a></li>
          <li><a href="gear.html" style="color:#fff; text-decoration:none;">Gear</a></li>
          <li><a href="optics.html" style="color:#fff; text-decoration:none;">Optics & Sights</a></li>
          <li><a href="reloading.html" style="color:#fff; text-decoration:none;">Reloading</a></li>
          <li><a href="survival.html" style="color:#fff; text-decoration:none;">Prep & Survival</a></li>
          <li><a href="brands.html" style="color:#fff; text-decoration:none;">Brands</a></li>
          <li><a href="sale.html" style="color:#fff; text-decoration:none;">ON SALE</a></li>
        </ul>
      </div>
      <div style="min-width:160px;">
        <h4 style="color:#fff; text-align:center;">Company</h4>
        <ul style="list-style:none; padding:0; text-align:center;">
          <li><a href="../about.html" style="color:#fff; text-decoration:none;">About</a></li>
          <li><a href="../services.html" style="color:#ffcc00; text-decoration:none; font-weight:bold;">Services</a></li>
          <li><a href="../contact.html" style="color:#fff; text-decoration:none;">Contact</a></li>
          <li><a href="../faq.html" style="color:#fff; text-decoration:none;">FAQ</a></li>
        </ul>
      </div>
      <div style="min-width:160px;">
        <h4 style="color:#fff; text-align:center;">Legal</h4>
        <ul style="list-style:none; padding:0; text-align:center;">
          <li><a href="../terms.html" style="color:#fff; text-decoration:none;">Terms & Conditions</a></li>
          <li><a href="../privacy.html" style="color:#fff; text-decoration:none;">Privacy Policy</a></li>
          <li><a href="../returns.html" style="color:#fff; text-decoration:none;">Return Policy</a></li>
          <li><a href="../order-status.html" style="color:#fff; text-decoration:none;">Order Status</a></li>
          <li><a href="../shipping.html" style="color:#fff; text-decoration:none;">Shipping Info</a></li>
        </ul>
      </div>
    </div>
    <div style="text-align:center; color:#fff; background:#181a1b; padding:1rem 0 0.5rem 0; font-size:1rem;">
      <p>All firearm sales comply with federal, state, and local laws. FFL required for applicable items. Not all products available in all states.</p>
      <p>© 2026 Modular Gunworks LLC. All rights reserved. <a href="mailto:modulargunworks@gmail.com" style="color:#fff; text-decoration:underline;">modulargunworks@gmail.com</a></p>
    </div>
  </footer>

  <script src="../scripts/theme-toggle.js"></script>
  <script>
    function nextStep(step) {
      document.querySelectorAll('.step-content').forEach(el => el.classList.remove('active'));
      document.querySelector(`[data-step="${step}"].step-content`).classList.add('active');
      
      document.querySelectorAll('.progress-step').forEach(el => {
        const s = parseInt(el.dataset.step);
        el.classList.remove('active', 'completed');
        if (s < step) el.classList.add('completed');
        if (s === step) el.classList.add('active');
      });
      
      window.scrollTo(0, 200);
    }

    function prevStep(step) {
      nextStep(step);
    }

    function togglePromo() {
      const form = document.getElementById('promo-form');
      form.style.display = form.style.display === 'none' ? 'block' : 'none';
    }

    document.getElementById('checkout-form').addEventListener('submit', function(e) {
      e.preventDefault();
      // In a real app, this would process the payment
      alert('Thank you for your order! In a production environment, payment would be processed here.');
      // Clear cart and redirect
      localStorage.setItem('cart', '[]');
      window.location.href = '../confirmation.html';
    });
  </script>
</body>
</html>
